-- Fluxcore.Hub GUI Framework (Improved)
local Library = {}

-- Service References
local Players = game:GetService("Players")
local Debris = game:GetService("Debris")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Create ScreenGui
local Gui = Instance.new("ScreenGui")
Gui.Name = "Fluxcore.Hub"
Gui.ResetOnSpawn = false
Gui.Parent = PlayerGui

local Windows = {}

-- Styling Utility
local function ApplyStyle(obj, radius)
	local corner = Instance.new("UICorner", obj)
	corner.CornerRadius = UDim.new(0, radius or 6)

	local stroke = Instance.new("UIStroke", obj)
	stroke.Thickness = 1
	stroke.Color = Color3.fromRGB(80, 80, 80)
end

-- Toggle Button
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 30, 0, 30)
ToggleButton.Position = UDim2.new(0.5, -15, 0, 10)
ToggleButton.AnchorPoint = Vector2.new(0.5, 0)
ToggleButton.Text = "F"
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.TextColor3 = Color3.new(1, 1, 1)
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 18
ToggleButton.Parent = Gui
ApplyStyle(ToggleButton, 4)

local MainVisible = true
ToggleButton.MouseButton1Click:Connect(function()
	MainVisible = not MainVisible
	for _, window in ipairs(Windows) do
		window.Visible = MainVisible
	end
end)

-- Create Main Window
function Library:MakeWindow(config)
	local Window = {}

	local MainFrame = Instance.new("Frame")
	MainFrame.Size = UDim2.new(0, 600, 0, 350)
	MainFrame.Position = UDim2.new(0.5, -300, 0.5, -175)
	MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	MainFrame.BorderSizePixel = 0
	MainFrame.Name = config.Name or "Window"
	MainFrame.Active = true
	MainFrame.Draggable = true
	MainFrame.Parent = Gui
	ApplyStyle(MainFrame, 10)
	table.insert(Windows, MainFrame)

	-- Top Bar
	local TopBar = Instance.new("TextLabel", MainFrame)
	TopBar.Size = UDim2.new(1, 0, 0, 40)
	TopBar.Text = config.Name or "Fluxcore Window"
	TopBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	TopBar.TextColor3 = Color3.new(1, 1, 1)
	TopBar.Font = Enum.Font.GothamBold
	TopBar.TextSize = 20
	TopBar.BorderSizePixel = 0
	ApplyStyle(TopBar)

	-- Sidebar
	local SideBar = Instance.new("Frame", MainFrame)
	SideBar.Size = UDim2.new(0, 100, 1, -40)
	SideBar.Position = UDim2.new(0, 0, 0, 40)
	SideBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	SideBar.BorderSizePixel = 0
	ApplyStyle(SideBar)

	local TabButtonLayout = Instance.new("UIListLayout", SideBar)
	TabButtonLayout.Padding = UDim.new(0, 5)
	TabButtonLayout.SortOrder = Enum.SortOrder.LayoutOrder

	local SidePadding = Instance.new("UIPadding", SideBar)
	SidePadding.PaddingTop = UDim.new(0, 5)
	SidePadding.PaddingLeft = UDim.new(0, 5)
	SidePadding.PaddingRight = UDim.new(0, 5)

	-- Content Area
	local ContentArea = Instance.new("Frame", MainFrame)
	ContentArea.Size = UDim2.new(1, -100, 1, -40)
	ContentArea.Position = UDim2.new(0, 100, 0, 40)
	ContentArea.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	ContentArea.BorderSizePixel = 0
	ApplyStyle(ContentArea)

	local Tabs = {}
	local CurrentTab

	function Window:MakeTab(info)
		local Tab = {}

		local TabButton = Instance.new("TextButton", SideBar)
		TabButton.Size = UDim2.new(1, 0, 0, 30)
		TabButton.Text = info.Name or "Tab"
		TabButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
		TabButton.TextColor3 = Color3.new(1, 1, 1)
		TabButton.Font = Enum.Font.Gotham
		TabButton.TextSize = 14
		ApplyStyle(TabButton)

		local Content = Instance.new("ScrollingFrame", ContentArea)
		Content.Size = UDim2.new(1, -10, 1, -10)
		Content.Position = UDim2.new(0, 5, 0, 5)
		Content.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Content.BorderSizePixel = 0
		Content.Visible = false
		Content.CanvasSize = UDim2.new(0, 0, 2, 0)
		Content.ScrollBarThickness = 6
		ApplyStyle(Content)

		local layout = Instance.new("UIListLayout", Content)
		layout.Padding = UDim.new(0, 6)
		layout.SortOrder = Enum.SortOrder.LayoutOrder

		local padding = Instance.new("UIPadding", Content)
		padding.PaddingLeft = UDim.new(0, 5)
		padding.PaddingRight = UDim.new(0, 5)
		padding.PaddingTop = UDim.new(0, 5)
		padding.PaddingBottom = UDim.new(0, 5)

		function Tab:Show()
			if CurrentTab then
				CurrentTab.Visible = false
			end
			Content.Visible = true
			CurrentTab = Content

			-- Visual Feedback for active tab
			for _, t in pairs(Tabs) do
				t.Button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
			end
			TabButton.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
		end

		TabButton.MouseButton1Click:Connect(function()
			Tab:Show()
		end)

		function Tab:AddButton(opts)
			local btn = Instance.new("TextButton", Content)
			btn.Size = UDim2.new(0, 200, 0, 30)
			btn.Text = opts.Name or "Button"
			btn.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
			btn.TextColor3 = Color3.new(1, 1, 1)
			btn.Font = Enum.Font.Gotham
			btn.TextSize = 14
			ApplyStyle(btn)
			btn.MouseButton1Click:Connect(opts.Callback)
		end

		function Tab:AddLabel(txt)
			local lbl = Instance.new("TextLabel", Content)
			lbl.Size = UDim2.new(1, 0, 0, 30)
			lbl.Text = txt
			lbl.BackgroundTransparency = 1
			lbl.TextColor3 = Color3.new(1, 1, 1)
			lbl.Font = Enum.Font.GothamBold
			lbl.TextSize = 18
		end

		function Tab:AddTextbox(opts)
			local box = Instance.new("TextBox", Content)
			box.Size = UDim2.new(1, 0, 0, 30)
			box.Text = opts.Default or ""
			box.ClearTextOnFocus = opts.TextDisappear or false
			box.TextColor3 = Color3.new(1, 1, 1)
			box.Font = Enum.Font.Code
			box.TextSize = 14
			box.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
			ApplyStyle(box)
			box.FocusLost:Connect(function()
				opts.Callback(box.Text)
			end)
		end

		Tab.Button = TabButton
		table.insert(Tabs, Tab)
		return Tab
	end

	return Window
end

-- Notification
function Library:MakeNotification(data)
	local msg = Instance.new("TextLabel", Gui)
	msg.Size = UDim2.new(0, 300, 0, 50)
	msg.Position = UDim2.new(1, -310, 1, -100)
	msg.Text = data.Content or "Notification"
	msg.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
	msg.TextColor3 = Color3.new(1, 1, 1)
	msg.Font = Enum.Font.GothamBold
	msg.TextSize = 18
	msg.TextWrapped = true
	ApplyStyle(msg)
	Debris:AddItem(msg, data.Time or 3)
end

-- Init
function Library:Init()
	print("Fluxcore.Hub Initialized")
end

-- Destroy
function Library:Destroy()
	if Gui then Gui:Destroy() end
end

return Library
